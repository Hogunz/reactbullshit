import{u as j,f as E,a as R,P as re,L as oe,b as k,M as X,i as Y,c as I,d as W,e as T,g as ie,h as P,j as le,k as ce,p as ae,v as ue,l as fe,w as de,m as A}from"./motion-8f97c8c5.js";import{r as l,j as d}from"./app-e704f413.js";function q(){const e=l.useRef(!1);return j(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function he(){const e=q(),[t,s]=l.useState(0),n=l.useCallback(()=>{e.current&&s(t+1)},[t]);return[l.useCallback(()=>E.postRender(n),[n]),t]}class pe extends l.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function me({children:e,isPresent:t}){const s=l.useId(),n=l.useRef(null),r=l.useRef({width:0,height:0,top:0,left:0});return l.useInsertionEffect(()=>{const{width:o,height:c,top:i,left:p}=r.current;if(t||!n.current||!o||!c)return;n.current.dataset.motionPopId=s;const h=document.createElement("style");return document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${c}px !important;
            top: ${i}px !important;
            left: ${p}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[t]),l.createElement(pe,{isPresent:t,childRef:n,sizeRef:r},l.cloneElement(e,{ref:n}))}const B=({children:e,initial:t,isPresent:s,onExitComplete:n,custom:r,presenceAffectsLayout:o,mode:c})=>{const i=R(ge),p=l.useId(),h=l.useMemo(()=>({id:p,initial:t,isPresent:s,custom:r,onExitComplete:f=>{i.set(f,!0);for(const a of i.values())if(!a)return;n&&n()},register:f=>(i.set(f,!1),()=>i.delete(f))}),o?void 0:[s]);return l.useMemo(()=>{i.forEach((f,a)=>i.set(a,!1))},[s]),l.useEffect(()=>{!s&&!i.size&&n&&n()},[s]),c==="popLayout"&&(e=l.createElement(me,{isPresent:s},e)),l.createElement(re.Provider,{value:h},e)};function ge(){return new Map}function xe(e){return l.useEffect(()=>()=>e(),[])}const w=e=>e.key||"";function ye(e,t){e.forEach(s=>{const n=w(s);t.set(n,s)})}function ve(e){const t=[];return l.Children.forEach(e,s=>{l.isValidElement(s)&&t.push(s)}),t}const we=({children:e,custom:t,initial:s=!0,onExitComplete:n,exitBeforeEnter:r,presenceAffectsLayout:o=!0,mode:c="sync"})=>{const i=l.useContext(oe).forceRender||he()[0],p=q(),h=ve(e);let f=h;const a=l.useRef(new Map).current,u=l.useRef(f),m=l.useRef(new Map).current,y=l.useRef(!0);if(j(()=>{y.current=!1,ye(h,m),u.current=f}),xe(()=>{y.current=!0,m.clear(),a.clear()}),y.current)return l.createElement(l.Fragment,null,f.map(g=>l.createElement(B,{key:w(g),isPresent:!0,initial:s?void 0:!1,presenceAffectsLayout:o,mode:c},g)));f=[...f];const M=u.current.map(w),V=h.map(w),Z=M.length;for(let g=0;g<Z;g++){const x=M[g];V.indexOf(x)===-1&&!a.has(x)&&a.set(x,void 0)}return c==="wait"&&a.size&&(f=[]),a.forEach((g,x)=>{if(V.indexOf(x)!==-1)return;const N=m.get(x);if(!N)return;const ee=M.indexOf(x);let z=g;if(!z){const te=()=>{m.delete(x),a.delete(x);const ne=u.current.findIndex(se=>se.key===x);if(u.current.splice(ne,1),!a.size){if(u.current=h,p.current===!1)return;i(),n&&n()}};z=l.createElement(B,{key:w(N),isPresent:!1,onExitComplete:te,custom:t,presenceAffectsLayout:o,mode:c},N),a.set(x,z)}f.splice(ee,0,z)}),f=f.map(g=>{const x=g.key;return a.has(x)?g:l.createElement(B,{key:w(g),isPresent:!0,presenceAffectsLayout:o,mode:c},g)}),l.createElement(l.Fragment,null,a.size?f:f.map(g=>l.cloneElement(g)))};function J(e){const t=R(()=>k(e)),{isStatic:s}=l.useContext(X);if(s){const[,n]=l.useState(e);l.useEffect(()=>t.on("change",n),[])}return t}const Ee=e=>typeof e=="object"&&e.mix,be=e=>Ee(e)?e.mix:void 0;function ke(...e){const t=!Array.isArray(e[0]),s=t?0:-1,n=e[0+s],r=e[1+s],o=e[2+s],c=e[3+s],i=Y(r,o,{mixer:be(o[0]),...c});return t?i(n):i}function Q(e,t){const s=J(t()),n=()=>s.set(t());return n(),j(()=>{const r=()=>E.update(n,!1,!0),o=e.map(c=>c.on("change",r));return()=>{o.forEach(c=>c()),I(n)}}),s}function Le(e){W.current=[],e();const t=Q(W.current,e);return W.current=void 0,t}function Je(e,t,s,n){if(typeof e=="function")return Le(e);const r=typeof t=="function"?t:ke(t,s,n);return Array.isArray(e)?F(e,r):F([e],([o])=>r(o))}function F(e,t){const s=R(()=>[]);return Q(e,()=>{s.length=0;const n=e.length;for(let r=0;r<n;r++)s[r]=e[r].get();return t(s)})}function Qe(e,t={}){const{isStatic:s}=l.useContext(X),n=l.useRef(null),r=J(T(e)?e.get():e),o=()=>{n.current&&n.current.stop()};return l.useInsertionEffect(()=>r.attach((c,i)=>{if(s)return i(c);if(o(),n.current=ie({keyframes:[r.get(),c],velocity:r.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:i}),!P.isProcessing){const p=performance.now()-P.timestamp;p<30&&(n.current.time=le(p))}return r.get()},o),[JSON.stringify(t)]),j(()=>{if(T(e))return e.on("change",c=>r.set(parseFloat(c)))},[r]),r}function je(e,t,s){var n;if(typeof e=="string"){let r=document;t&&(ce(!!t.current),r=t.current),s?((n=s[e])!==null&&n!==void 0||(s[e]=r.querySelectorAll(e)),e=s[e]):e=r.querySelectorAll(e)}else e instanceof Element&&(e=[e]);return Array.from(e||[])}const C=new WeakMap;let v;function ze(e,t){if(t){const{inlineSize:s,blockSize:n}=t[0];return{width:s,height:n}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function Ce({target:e,contentRect:t,borderBoxSize:s}){var n;(n=C.get(e))===null||n===void 0||n.forEach(r=>{r({target:e,contentSize:t,get size(){return ze(e,s)}})})}function Se(e){e.forEach(Ce)}function Re(){typeof ResizeObserver>"u"||(v=new ResizeObserver(Se))}function Me(e,t){v||Re();const s=je(e);return s.forEach(n=>{let r=C.get(n);r||(r=new Set,C.set(n,r)),r.add(t),v==null||v.observe(n)}),()=>{s.forEach(n=>{const r=C.get(n);r==null||r.delete(t),r!=null&&r.size||v==null||v.unobserve(n)})}}const S=new Set;let L;function Ne(){L=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};S.forEach(s=>s(t))},window.addEventListener("resize",L)}function We(e){return S.add(e),L||Ne(),()=>{S.delete(e),!S.size&&L&&(L=void 0)}}function Ae(e,t){return typeof e=="function"?We(e):Me(e,t)}const Be=50,_=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),He=()=>({time:0,x:_(),y:_()}),Pe={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function $(e,t,s,n){const r=s[t],{length:o,position:c}=Pe[t],i=r.current,p=s.time;r.current=e["scroll"+c],r.scrollLength=e["scroll"+o]-e["client"+o],r.offset.length=0,r.offset[0]=0,r.offset[1]=r.scrollLength,r.progress=ae(0,r.scrollLength,r.current);const h=n-p;r.velocity=h>Be?0:ue(r.current-i,h)}function Oe(e,t,s){$(e,"x",t,s),$(e,"y",t,s),t.time=s}function Ve(e,t){const s={x:0,y:0};let n=e;for(;n&&n!==t;)if(n instanceof HTMLElement)s.x+=n.offsetLeft,s.y+=n.offsetTop,n=n.offsetParent;else if(n.tagName==="svg"){const r=n.getBoundingClientRect();n=n.parentElement;const o=n.getBoundingClientRect();s.x+=r.left-o.left,s.y+=r.top-o.top}else if(n instanceof SVGGraphicsElement){const{x:r,y:o}=n.getBBox();s.x+=r,s.y+=o;let c=null,i=n.parentNode;for(;!c;)i.tagName==="svg"&&(c=i),i=n.parentNode;n=c}else break;return s}const Te={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},O={start:0,center:.5,end:1};function D(e,t,s=0){let n=0;if(O[e]!==void 0&&(e=O[e]),typeof e=="string"){const r=parseFloat(e);e.endsWith("px")?n=r:e.endsWith("%")?e=r/100:e.endsWith("vw")?n=r/100*document.documentElement.clientWidth:e.endsWith("vh")?n=r/100*document.documentElement.clientHeight:e=r}return typeof e=="number"&&(n=t*e),s+n}const Fe=[0,0];function _e(e,t,s,n){let r=Array.isArray(e)?e:Fe,o=0,c=0;return typeof e=="number"?r=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?r=e.split(" "):r=[e,O[e]?e:"0"]),o=D(r[0],s,n),c=D(r[1],t),o-c}const $e={x:0,y:0};function De(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function Ge(e,t,s){let{offset:n=Te.All}=s;const{target:r=e,axis:o="y"}=s,c=o==="y"?"height":"width",i=r!==e?Ve(r,e):$e,p=r===e?{width:e.scrollWidth,height:e.scrollHeight}:De(r),h={width:e.clientWidth,height:e.clientHeight};t[o].offset.length=0;let f=!t[o].interpolate;const a=n.length;for(let u=0;u<a;u++){const m=_e(n[u],h[c],p[c],i[o]);!f&&m!==t[o].interpolatorOffsets[u]&&(f=!0),t[o].offset[u]=m}f&&(t[o].interpolate=Y(t[o].offset,fe(n)),t[o].interpolatorOffsets=[...t[o].offset]),t[o].progress=t[o].interpolate(t[o].current)}function Ue(e,t=e,s){if(s.x.targetOffset=0,s.y.targetOffset=0,t!==e){let n=t;for(;n&&n!==e;)s.x.targetOffset+=n.offsetLeft,s.y.targetOffset+=n.offsetTop,n=n.offsetParent}s.x.targetLength=t===e?t.scrollWidth:t.clientWidth,s.y.targetLength=t===e?t.scrollHeight:t.clientHeight,s.x.containerLength=e.clientWidth,s.y.containerLength=e.clientHeight}function Ke(e,t,s,n={}){return{measure:()=>Ue(e,n.target,s),update:r=>{Oe(e,s,r),(n.offset||n.target)&&Ge(e,s,n)},notify:()=>t(s)}}const b=new WeakMap,G=new WeakMap,H=new WeakMap,U=e=>e===document.documentElement?window:e;function Xe(e,{container:t=document.documentElement,...s}={}){let n=H.get(t);n||(n=new Set,H.set(t,n));const r=He(),o=Ke(t,e,r,s);if(n.add(o),!b.has(t)){const i=()=>{for(const u of n)u.measure()},p=()=>{for(const u of n)u.update(P.timestamp)},h=()=>{for(const u of n)u.notify()},f=()=>{E.read(i,!1,!0),E.update(p,!1,!0),E.update(h,!1,!0)};b.set(t,f);const a=U(t);window.addEventListener("resize",f,{passive:!0}),t!==document.documentElement&&G.set(t,Ae(t,f)),a.addEventListener("scroll",f,{passive:!0})}const c=b.get(t);return E.read(c,!1,!0),()=>{var i;I(c);const p=H.get(t);if(!p||(p.delete(o),p.size))return;const h=b.get(t);b.delete(t),h&&(U(t).removeEventListener("scroll",h),(i=G.get(t))===null||i===void 0||i(),window.removeEventListener("resize",h))}}function K(e,t){de(!!(!t||t.current))}const Ye=()=>({scrollX:k(0),scrollY:k(0),scrollXProgress:k(0),scrollYProgress:k(0)});function Ze({container:e,target:t,layoutEffect:s=!0,...n}={}){const r=R(Ye);return(s?j:l.useEffect)(()=>(K("target",t),K("container",e),Xe(({x:c,y:i})=>{r.scrollX.set(c.current),r.scrollXProgress.set(c.progress),r.scrollY.set(i.current),r.scrollYProgress.set(i.progress)},{...n,container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0})),[e,t,JSON.stringify(n.offset)]),r}function et({isOpen:e,onClose:t,initialItem:s,initialCategory:n,allItems:r}){const[o,c]=l.useState(0),[i,p]=l.useState([]);l.useEffect(()=>{if(e&&r){let u=[],m=0;s?(u=r.filter(y=>y.category===s.category),m=u.findIndex(y=>y.id===s.id)):n&&(u=r.filter(y=>y.category===n),m=0),p(u),c(m>=0?m:0)}},[e,s,n,r]);const h=()=>{c(u=>(u+1)%i.length)},f=()=>{c(u=>(u-1+i.length)%i.length)};if(l.useEffect(()=>{const u=m=>{e&&(m.key==="Escape"&&t(),m.key==="ArrowRight"&&h(),m.key==="ArrowLeft"&&f())};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[e,i]),!e)return null;const a=i[o];return d.jsx(we,{children:e&&d.jsxs(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/95 backdrop-blur-md p-4 md:p-8",children:[d.jsx("button",{onClick:t,className:"absolute top-4 right-4 md:top-8 md:right-8 p-3 rounded-full bg-white/10 text-white hover:bg-white/20 transition-colors z-50",children:d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),d.jsxs("div",{className:"w-full max-w-7xl h-full flex flex-col md:flex-row gap-8 items-center justify-center",children:[d.jsxs("div",{className:"relative w-full md:w-3/4 h-[50vh] md:h-[80vh] flex items-center justify-center",children:[i.length>1&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:f,className:"absolute left-4 p-2 rounded-full bg-black/50 text-white hover:bg-purple hover:scale-110 transition-all z-20 hidden md:block",children:d.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),d.jsx("button",{onClick:h,className:"absolute right-4 p-2 rounded-full bg-black/50 text-white hover:bg-purple hover:scale-110 transition-all z-20 hidden md:block",children:d.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]}),d.jsx(A.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:300,damping:30},className:"relative w-full h-full rounded-2xl overflow-hidden shadow-2xl border border-white/10 bg-dark flex items-center justify-center p-2",children:(a==null?void 0:a.media_type)==="video"?d.jsx("video",{src:a==null?void 0:a.media_path,className:"w-full h-full object-contain",controls:!0,autoPlay:!0,controlsList:"nodownload"}):d.jsx("img",{src:a==null?void 0:a.media_path,alt:a==null?void 0:a.title,className:"w-full h-full object-contain"})},a==null?void 0:a.id)]}),d.jsxs("div",{className:"w-full md:w-1/4 flex flex-col justify-end md:justify-center text-white space-y-4 md:space-y-6",children:[d.jsxs(A.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},children:[d.jsx("span",{className:"inline-block px-3 py-1 rounded-full bg-purple/20 text-purple text-xs md:text-sm font-mono mb-2",children:a==null?void 0:a.category}),d.jsx("h2",{className:"text-3xl md:text-5xl font-black tracking-tight leading-tight",children:a==null?void 0:a.title}),d.jsx("div",{className:"h-1 w-20 bg-purple mt-4 rounded-full"}),d.jsxs("div",{className:"mt-8 text-white/50 text-sm font-mono",children:[o+1," / ",i.length]})]},`info-${a==null?void 0:a.id}`),i.length>1&&d.jsx("div",{className:"flex gap-2 overflow-x-auto py-2 mt-4 mask-fade-right",children:i.map((u,m)=>d.jsx("button",{onClick:()=>c(m),className:`relative w-16 h-16 rounded-lg overflow-hidden flex-shrink-0 transition-all ${m===o?"ring-2 ring-purple opacity-100":"opacity-50 hover:opacity-100"}`,children:u.media_type==="video"?d.jsx("video",{src:u.media_path,className:"w-full h-full object-cover",muted:!0}):d.jsx("img",{src:u.media_path,alt:u.title,className:"w-full h-full object-cover"})},u.id))})]})]})]})})}export{et as G,Je as a,J as b,Qe as c,Ze as u};
