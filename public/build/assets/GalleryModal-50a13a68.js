import{r as c,j as u}from"./app-d32c4aec.js";import{u as C,f as b,a as G,P as J,L as Q,M as Z,i as O,b as ee,c as H,d as te,e as ne,p as se,v as re,g as oe,h as ie,j as le,w as ce,k as L,m as M}from"./motion-d0cd3a0a.js";import{a as ae}from"./use-transform-fb9a2761.js";function U(){const e=c.useRef(!1);return C(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function fe(){const e=U(),[n,s]=c.useState(0),t=c.useCallback(()=>{e.current&&s(n+1)},[n]);return[c.useCallback(()=>b.postRender(t),[t]),n]}class de extends c.Component{getSnapshotBeforeUpdate(n){const s=this.props.childRef.current;if(s&&n.isPresent&&!this.props.isPresent){const t=this.props.sizeRef.current;t.height=s.offsetHeight||0,t.width=s.offsetWidth||0,t.top=s.offsetTop,t.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ue({children:e,isPresent:n}){const s=c.useId(),t=c.useRef(null),r=c.useRef({width:0,height:0,top:0,left:0});return c.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:p}=r.current;if(n||!t.current||!o||!a)return;t.current.dataset.motionPopId=s;const h=document.createElement("style");return document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${p}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[n]),c.createElement(de,{isPresent:n,childRef:t,sizeRef:r},c.cloneElement(e,{ref:t}))}const W=({children:e,initial:n,isPresent:s,onExitComplete:t,custom:r,presenceAffectsLayout:o,mode:a})=>{const l=G(he),p=c.useId(),h=c.useMemo(()=>({id:p,initial:n,isPresent:s,custom:r,onExitComplete:d=>{l.set(d,!0);for(const i of l.values())if(!i)return;t&&t()},register:d=>(l.set(d,!1),()=>l.delete(d))}),o?void 0:[s]);return c.useMemo(()=>{l.forEach((d,i)=>l.set(i,!1))},[s]),c.useEffect(()=>{!s&&!l.size&&t&&t()},[s]),a==="popLayout"&&(e=c.createElement(ue,{isPresent:s},e)),c.createElement(J.Provider,{value:h},e)};function he(){return new Map}function pe(e){return c.useEffect(()=>()=>e(),[])}const y=e=>e.key||"";function ge(e,n){e.forEach(s=>{const t=y(s);n.set(t,s)})}function me(e){const n=[];return c.Children.forEach(e,s=>{c.isValidElement(s)&&n.push(s)}),n}const xe=({children:e,custom:n,initial:s=!0,onExitComplete:t,exitBeforeEnter:r,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const l=c.useContext(Q).forceRender||fe()[0],p=U(),h=me(e);let d=h;const i=c.useRef(new Map).current,f=c.useRef(d),g=c.useRef(new Map).current,v=c.useRef(!0);if(C(()=>{v.current=!1,ge(h,g),f.current=d}),pe(()=>{v.current=!0,g.clear(),i.clear()}),v.current)return c.createElement(c.Fragment,null,d.map(m=>c.createElement(W,{key:y(m),isPresent:!0,initial:s?void 0:!1,presenceAffectsLayout:o,mode:a},m)));d=[...d];const R=f.current.map(y),A=h.map(y),K=R.length;for(let m=0;m<K;m++){const x=R[m];A.indexOf(x)===-1&&!i.has(x)&&i.set(x,void 0)}return a==="wait"&&i.size&&(d=[]),i.forEach((m,x)=>{if(A.indexOf(x)!==-1)return;const N=g.get(x);if(!N)return;const X=R.indexOf(x);let j=m;if(!j){const Y=()=>{g.delete(x),i.delete(x);const q=f.current.findIndex(I=>I.key===x);if(f.current.splice(q,1),!i.size){if(f.current=h,p.current===!1)return;l(),t&&t()}};j=c.createElement(W,{key:y(N),isPresent:!1,onExitComplete:Y,custom:n,presenceAffectsLayout:o,mode:a},N),i.set(x,j)}d.splice(X,0,j)}),d=d.map(m=>{const x=m.key;return i.has(x)?m:c.createElement(W,{key:y(m),isPresent:!0,presenceAffectsLayout:o,mode:a},m)}),c.createElement(c.Fragment,null,i.size?d:d.map(m=>c.cloneElement(m)))};function Ue(e,n={}){const{isStatic:s}=c.useContext(Z),t=c.useRef(null),r=ae(O(e)?e.get():e),o=()=>{t.current&&t.current.stop()};return c.useInsertionEffect(()=>r.attach((a,l)=>{if(s)return l(a);if(o(),t.current=ee({keyframes:[r.get(),a],velocity:r.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...n,onUpdate:l}),!H.isProcessing){const p=performance.now()-H.timestamp;p<30&&(t.current.time=te(p))}return r.get()},o),[JSON.stringify(n)]),C(()=>{if(O(e))return e.on("change",a=>r.set(parseFloat(a)))},[r]),r}function ve(e,n,s){var t;if(typeof e=="string"){let r=document;n&&(ne(!!n.current),r=n.current),s?((t=s[e])!==null&&t!==void 0||(s[e]=r.querySelectorAll(e)),e=s[e]):e=r.querySelectorAll(e)}else e instanceof Element&&(e=[e]);return Array.from(e||[])}const z=new WeakMap;let w;function we(e,n){if(n){const{inlineSize:s,blockSize:t}=n[0];return{width:s,height:t}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function ye({target:e,contentRect:n,borderBoxSize:s}){var t;(t=z.get(e))===null||t===void 0||t.forEach(r=>{r({target:e,contentSize:n,get size(){return we(e,s)}})})}function Ee(e){e.forEach(ye)}function be(){typeof ResizeObserver>"u"||(w=new ResizeObserver(Ee))}function ke(e,n){w||be();const s=ve(e);return s.forEach(t=>{let r=z.get(t);r||(r=new Set,z.set(t,r)),r.add(n),w==null||w.observe(t)}),()=>{s.forEach(t=>{const r=z.get(t);r==null||r.delete(n),r!=null&&r.size||w==null||w.unobserve(t)})}}const S=new Set;let k;function je(){k=()=>{const e={width:window.innerWidth,height:window.innerHeight},n={target:window,size:e,contentSize:e};S.forEach(s=>s(n))},window.addEventListener("resize",k)}function Le(e){return S.add(e),k||je(),()=>{S.delete(e),!S.size&&k&&(k=void 0)}}function ze(e,n){return typeof e=="function"?Le(e):ke(e,n)}const Se=50,F=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),Ce=()=>({time:0,x:F(),y:F()}),Re={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function T(e,n,s,t){const r=s[n],{length:o,position:a}=Re[n],l=r.current,p=s.time;r.current=e["scroll"+a],r.scrollLength=e["scroll"+o]-e["client"+o],r.offset.length=0,r.offset[0]=0,r.offset[1]=r.scrollLength,r.progress=se(0,r.scrollLength,r.current);const h=t-p;r.velocity=h>Se?0:re(r.current-l,h)}function Ne(e,n,s){T(e,"x",n,s),T(e,"y",n,s),n.time=s}function Me(e,n){const s={x:0,y:0};let t=e;for(;t&&t!==n;)if(t instanceof HTMLElement)s.x+=t.offsetLeft,s.y+=t.offsetTop,t=t.offsetParent;else if(t.tagName==="svg"){const r=t.getBoundingClientRect();t=t.parentElement;const o=t.getBoundingClientRect();s.x+=r.left-o.left,s.y+=r.top-o.top}else if(t instanceof SVGGraphicsElement){const{x:r,y:o}=t.getBBox();s.x+=r,s.y+=o;let a=null,l=t.parentNode;for(;!a;)l.tagName==="svg"&&(a=l),l=t.parentNode;t=a}else break;return s}const We={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},P={start:0,center:.5,end:1};function _(e,n,s=0){let t=0;if(P[e]!==void 0&&(e=P[e]),typeof e=="string"){const r=parseFloat(e);e.endsWith("px")?t=r:e.endsWith("%")?e=r/100:e.endsWith("vw")?t=r/100*document.documentElement.clientWidth:e.endsWith("vh")?t=r/100*document.documentElement.clientHeight:e=r}return typeof e=="number"&&(t=n*e),s+t}const Be=[0,0];function He(e,n,s,t){let r=Array.isArray(e)?e:Be,o=0,a=0;return typeof e=="number"?r=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?r=e.split(" "):r=[e,P[e]?e:"0"]),o=_(r[0],s,t),a=_(r[1],n),o-a}const Pe={x:0,y:0};function Ae(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function Oe(e,n,s){let{offset:t=We.All}=s;const{target:r=e,axis:o="y"}=s,a=o==="y"?"height":"width",l=r!==e?Me(r,e):Pe,p=r===e?{width:e.scrollWidth,height:e.scrollHeight}:Ae(r),h={width:e.clientWidth,height:e.clientHeight};n[o].offset.length=0;let d=!n[o].interpolate;const i=t.length;for(let f=0;f<i;f++){const g=He(t[f],h[a],p[a],l[o]);!d&&g!==n[o].interpolatorOffsets[f]&&(d=!0),n[o].offset[f]=g}d&&(n[o].interpolate=oe(n[o].offset,ie(t)),n[o].interpolatorOffsets=[...n[o].offset]),n[o].progress=n[o].interpolate(n[o].current)}function Fe(e,n=e,s){if(s.x.targetOffset=0,s.y.targetOffset=0,n!==e){let t=n;for(;t&&t!==e;)s.x.targetOffset+=t.offsetLeft,s.y.targetOffset+=t.offsetTop,t=t.offsetParent}s.x.targetLength=n===e?n.scrollWidth:n.clientWidth,s.y.targetLength=n===e?n.scrollHeight:n.clientHeight,s.x.containerLength=e.clientWidth,s.y.containerLength=e.clientHeight}function Te(e,n,s,t={}){return{measure:()=>Fe(e,t.target,s),update:r=>{Ne(e,s,r),(t.offset||t.target)&&Oe(e,s,t)},notify:()=>n(s)}}const E=new WeakMap,V=new WeakMap,B=new WeakMap,$=e=>e===document.documentElement?window:e;function _e(e,{container:n=document.documentElement,...s}={}){let t=B.get(n);t||(t=new Set,B.set(n,t));const r=Ce(),o=Te(n,e,r,s);if(t.add(o),!E.has(n)){const l=()=>{for(const f of t)f.measure()},p=()=>{for(const f of t)f.update(H.timestamp)},h=()=>{for(const f of t)f.notify()},d=()=>{b.read(l,!1,!0),b.update(p,!1,!0),b.update(h,!1,!0)};E.set(n,d);const i=$(n);window.addEventListener("resize",d,{passive:!0}),n!==document.documentElement&&V.set(n,ze(n,d)),i.addEventListener("scroll",d,{passive:!0})}const a=E.get(n);return b.read(a,!1,!0),()=>{var l;le(a);const p=B.get(n);if(!p||(p.delete(o),p.size))return;const h=E.get(n);E.delete(n),h&&($(n).removeEventListener("scroll",h),(l=V.get(n))===null||l===void 0||l(),window.removeEventListener("resize",h))}}function D(e,n){ce(!!(!n||n.current))}const Ve=()=>({scrollX:L(0),scrollY:L(0),scrollXProgress:L(0),scrollYProgress:L(0)});function Ke({container:e,target:n,layoutEffect:s=!0,...t}={}){const r=G(Ve);return(s?C:c.useEffect)(()=>(D("target",n),D("container",e),_e(({x:a,y:l})=>{r.scrollX.set(a.current),r.scrollXProgress.set(a.progress),r.scrollY.set(l.current),r.scrollYProgress.set(l.progress)},{...t,container:(e==null?void 0:e.current)||void 0,target:(n==null?void 0:n.current)||void 0})),[e,n,JSON.stringify(t.offset)]),r}function Xe({isOpen:e,onClose:n,initialItem:s,initialCategory:t,allItems:r}){const[o,a]=c.useState(0),[l,p]=c.useState([]);c.useEffect(()=>{if(e&&r){let f=[],g=0;s?(f=r.filter(v=>v.category===s.category),g=f.findIndex(v=>v.id===s.id)):t&&(f=r.filter(v=>v.category===t),g=0),p(f),a(g>=0?g:0)}},[e,s,t,r]);const h=()=>{a(f=>(f+1)%l.length)},d=()=>{a(f=>(f-1+l.length)%l.length)};if(c.useEffect(()=>{const f=g=>{e&&(g.key==="Escape"&&n(),g.key==="ArrowRight"&&h(),g.key==="ArrowLeft"&&d())};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[e,l]),!e)return null;const i=l[o];return u.jsx(xe,{children:e&&u.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/95 backdrop-blur-md p-4 md:p-8",children:[u.jsx("button",{onClick:n,className:"absolute top-4 right-4 md:top-8 md:right-8 p-3 rounded-full bg-white/10 text-white hover:bg-white/20 transition-colors z-50",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),u.jsxs("div",{className:"w-full max-w-7xl h-full flex flex-col md:flex-row gap-8 items-center justify-center",children:[u.jsxs("div",{className:"relative w-full md:w-3/4 h-[50vh] md:h-[80vh] flex items-center justify-center",children:[l.length>1&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:d,className:"absolute left-4 p-2 rounded-full bg-black/50 text-white hover:bg-purple hover:scale-110 transition-all z-20 hidden md:block",children:u.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),u.jsx("button",{onClick:h,className:"absolute right-4 p-2 rounded-full bg-black/50 text-white hover:bg-purple hover:scale-110 transition-all z-20 hidden md:block",children:u.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]}),u.jsx(M.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:300,damping:30},className:"relative w-full h-full rounded-2xl overflow-hidden shadow-2xl border border-white/10 bg-dark flex items-center justify-center p-2",children:(i==null?void 0:i.media_type)==="video"?u.jsx("video",{src:i==null?void 0:i.media_path,className:"w-full h-full object-contain",controls:!0,autoPlay:!0,controlsList:"nodownload"}):u.jsx("img",{src:i==null?void 0:i.media_path,alt:i==null?void 0:i.title,className:"w-full h-full object-contain"})},i==null?void 0:i.id)]}),u.jsxs("div",{className:"w-full md:w-1/4 flex flex-col justify-end md:justify-center text-white space-y-4 md:space-y-6",children:[u.jsxs(M.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},children:[u.jsx("span",{className:"inline-block px-3 py-1 rounded-full bg-purple/20 text-purple text-xs md:text-sm font-mono mb-2",children:i==null?void 0:i.category}),u.jsx("h2",{className:"text-3xl md:text-5xl font-black tracking-tight leading-tight",children:i==null?void 0:i.title}),u.jsx("div",{className:"h-1 w-20 bg-purple mt-4 rounded-full"}),u.jsxs("div",{className:"mt-8 text-white/50 text-sm font-mono",children:[o+1," / ",l.length]})]},`info-${i==null?void 0:i.id}`),l.length>1&&u.jsx("div",{className:"flex gap-2 overflow-x-auto py-2 mt-4 mask-fade-right",children:l.map((f,g)=>u.jsx("button",{onClick:()=>a(g),className:`relative w-16 h-16 rounded-lg overflow-hidden flex-shrink-0 transition-all ${g===o?"ring-2 ring-purple opacity-100":"opacity-50 hover:opacity-100"}`,children:f.media_type==="video"?u.jsx("video",{src:f.media_path,className:"w-full h-full object-cover",muted:!0}):u.jsx("img",{src:f.media_path,alt:f.title,className:"w-full h-full object-cover"})},f.id))})]})]})]})})}export{Xe as G,Ue as a,Ke as u};
