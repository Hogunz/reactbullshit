import{r as a,W as E,j as e,d as y,y as L}from"./app-d32c4aec.js";import{N as O}from"./NavBar-7ee45a4d.js";import{n as S,o as D,a as R,m as I,i as B}from"./motion-d0cd3a0a.js";import{u as G,a as V}from"./use-transform-fb9a2761.js";import"./SVGicon-e884c9be.js";const C=a.createContext(null);function W(s,i,o,m){if(!m)return s;const c=s.findIndex(d=>d.value===i);if(c===-1)return s;const u=m>0?1:-1,g=s[c+u];if(!g)return s;const f=s[c],l=g.layout,x=S(l.min,l.max,.5);return u===1&&f.layout.max+o>x||u===-1&&f.layout.min+o<x?D(s,c,c+u):s}function _({children:s,as:i="ul",axis:o="y",onReorder:m,values:c,...u},g){const f=R(()=>I(i)),l=[],x=a.useRef(!1),d={axis:o,registerItem:(p,r)=>{r&&l.findIndex(t=>p===t.value)===-1&&(l.push({value:p,layout:r[o]}),l.sort(H))},updateOrder:(p,r,t)=>{if(x.current)return;const n=W(l,p,r,t);l!==n&&(x.current=!0,m(n.map(A).filter(h=>c.indexOf(h)!==-1)))}};return a.useEffect(()=>{x.current=!1}),a.createElement(f,{...u,ref:g,ignoreStrict:!0},a.createElement(C.Provider,{value:d},s))}const z=a.forwardRef(_);function A(s){return s.value}function H(s,i){return s.layout.min-i.layout.min}function k(s,i=0){return B(s)?s:V(i)}function T({children:s,style:i={},value:o,as:m="li",onDrag:c,layout:u=!0,...g},f){const l=R(()=>I(m)),x=a.useContext(C),d={x:k(i.x),y:k(i.y)},p=G([d.x,d.y],([b,v])=>b||v?1:"unset"),r=a.useRef(null),{axis:t,registerItem:n,updateOrder:h}=x;return a.useEffect(()=>{n(o,r.current)},[x]),a.createElement(l,{drag:t,...g,dragSnapToOrigin:!0,style:{...i,x:d.x,y:d.y,zIndex:p},layout:u,onDrag:(b,v)=>{const{velocity:w}=v;w[t]&&h(o,d[t].get(),w[t]),c&&c(b,v)},onLayoutMeasure:b=>{r.current=b},ref:f,ignoreStrict:!0},s)}const F=a.forwardRef(T),N={Group:z,Item:F};function P({faculties:s}){var p;const{delete:i}=E({}),[o,m]=a.useState({}),[c,u]=a.useState(!1);a.useEffect(()=>{const r={};s.data.forEach(t=>{const n=t.row_number||1;r[n]||(r[n]=[]),r[n].push(t)}),m(r)},[s.data]);function g(r){confirm("Are you sure you want to delete this faculty member?")&&i(route("faculties.destroy",r))}const f=(r,t)=>{m({...o,[r]:t}),u(!0)},l=(r,t)=>{const n=r.row_number||1,h=t==="up"?n-1:n+1;if(h<1)return;const b=o[n].filter(M=>M.id!==r.id),v={...r,row_number:h},w=[...o[h]||[],v],j={...o,[n]:b,[h]:w};j[n].length===0&&delete j[n],m(j),u(!0)},x=()=>{const r=[];Object.keys(o).forEach(t=>{o[t].forEach((n,h)=>{r.push({id:n.id,sort_order:h+1,row_number:parseInt(t)})})}),L.post(route("faculties.reorder"),{items:r},{preserveScroll:!0,onSuccess:()=>u(!1)})},d=()=>{const r=Object.keys(o).map(Number).sort((t,n)=>t-n);return r.length===0?[1]:r};return e.jsxs(e.Fragment,{children:[e.jsx(O,{}),e.jsxs("div",{className:"relative min-h-screen bg-light dark:bg-dark overflow-hidden pt-24 pb-12",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple/5 via-transparent to-purple/5 dark:from-purple/10 dark:to-dark pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 brightness-100 contrast-150 mix-blend-overlay pointer-events-none"}),e.jsxs("div",{className:"relative z-10 mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4",children:[e.jsxs("h1",{className:"text-3xl font-extrabold text-dark dark:text-light tracking-tight",children:["Faculty ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple to-fuchsia-500",children:"Organization"})]}),e.jsxs("div",{className:"flex gap-4",children:[c&&e.jsx("button",{onClick:x,className:"inline-flex items-center justify-center px-6 py-3 border border-transparent text-sm font-bold rounded-full text-white bg-green-500 hover:bg-green-600 shadow-lg hover:shadow-green-500/50 transform hover:-translate-y-0.5 transition-all duration-200",children:"Save Changes"}),e.jsxs(y,{href:route("faculties.create"),className:"inline-flex items-center justify-center px-6 py-3 border border-transparent text-sm font-bold rounded-full text-white bg-purple hover:bg-purple/90 shadow-lg hover:shadow-purple/50 transform hover:-translate-y-0.5 transition-all duration-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Add New Faculty"]})]})]}),e.jsxs("div",{className:"space-y-8",children:[d().map(r=>e.jsxs("div",{className:"relative rounded-3xl bg-white/60 dark:bg-white/5 backdrop-blur-xl border border-white/20 shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 bg-purple/10 dark:bg-purple/20 border-b border-white/10 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-bold text-dark dark:text-light",children:["Row ",r]}),e.jsx("span",{className:"text-xs font-mono text-gray-500 dark:text-gray-400",children:"Drag to reorder within row • Use arrows to move between rows"})]}),e.jsx("div",{className:"p-4 overflow-x-auto",children:e.jsxs(N.Group,{axis:"y",values:o[r]||[],onReorder:t=>f(r,t),className:"space-y-2",children:[(o[r]||[]).map(t=>e.jsxs(N.Item,{value:t,className:"flex items-center gap-4 p-3 rounded-xl bg-white/50 dark:bg-black/20 border border-white/10 hover:border-purple/30 transition-all cursor-move group",whileDrag:{scale:1.02,backgroundColor:"rgba(139, 92, 246, 0.1)"},children:[e.jsx("div",{className:"cursor-grab active:cursor-grabbing text-gray-400 hover:text-purple",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 8h16M4 16h16"})})}),e.jsx("img",{src:`/storage/${t.image}`,alt:t.name,className:"h-12 w-12 rounded-full object-cover border-2 border-purple/20"}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsx("h4",{className:"font-bold text-dark dark:text-light truncate",children:t.name}),e.jsx("p",{className:"text-sm text-purple truncate",children:t.position})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex flex-col gap-1 mr-4",children:[e.jsx("button",{onClick:()=>l(t,"up"),className:"p-1 rounded bg-gray-200 dark:bg-gray-700 hover:bg-purple hover:text-white transition-colors text-xs",title:"Move to Row Above",disabled:r<=1,children:"▲"}),e.jsx("button",{onClick:()=>l(t,"down"),className:"p-1 rounded bg-gray-200 dark:bg-gray-700 hover:bg-purple hover:text-white transition-colors text-xs",title:"Move to Row Below",children:"▼"})]}),e.jsx("div",{className:"h-8 w-px bg-gray-300 dark:bg-gray-600 mx-2"}),e.jsx(y,{href:route("faculties.edit",t.id),className:"p-2 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"Edit",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>g(t.id),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},t.id)),(o[r]||[]).length===0&&e.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400 italic bg-white/5 rounded-xl border border-dashed border-white/10",children:"Empty Row"})]})})]},r)),(p=o[d().pop()])!=null&&p.length?e.jsx("div",{className:"opacity-50 hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"px-6 py-4 rounded-3xl border-2 border-dashed border-gray-300 dark:border-gray-700 flex justify-center items-center text-gray-500 dark:text-gray-400",children:e.jsxs("span",{children:["Move items down to create Row ",d().length+1]})})}):null]})]})]})]})}export{P as default};
